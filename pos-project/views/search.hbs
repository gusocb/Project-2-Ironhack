<h1>Search Product</h1>
<input type="text" name="barcode" id="barcode" placeholder="Barcode">
<button onclick="getProduct()">Search</button>
<span id="errorMessage" class="hidden">Este producto no existe</span>
<br>


<div class="show-product" id="show-product"></div>

<a href="/logout">Logout</a>

<script>
function getProduct(){
  let barcode = document.getElementById('barcode');
  if(!barcode.value) return;
  const errorMessage = document.getElementById("errorMessage")
  errorMessage.classList.add('hidden')
  fetch(`/search?barcode=${barcode.value}`).then(res=>res.json()).then(product=>{
    if (!product) {
      errorMessage.classList.remove('hidden')
      return;
    }
    const productList = document.getElementById('show-product')
    const productDiv = document.createElement('div')
    productDiv.innerHTML = `${product.name} <br> $<span class="price">${product.price}</span>`
    productList.appendChild(productDiv)
    barcode.value = null;
    calculateTotal()
  })
}

function calculateTotal(){
  console.log('aqui va la logica del total')
}

</script>